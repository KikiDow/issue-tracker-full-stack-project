{"filter":false,"title":"views.py","tooltip":"/accounts/views.py","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":35},"end":{"row":0,"column":67},"action":"insert","lines":[", redirect, HttpResponseRedirect"],"id":2}],[{"start":{"row":0,"column":67},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":44},"action":"insert","lines":["from django.contrib import messages, auth","from django.core.urlresolvers import reverse"],"id":4}],[{"start":{"row":5,"column":0},"end":{"row":9,"column":37},"action":"insert","lines":["def logout(request):","    \"\"\"A view that logs the user out and redirects back to the index page\"\"\"","    auth.logout(request)","    messages.success(request, 'You have successfully logged out')","    return redirect(reverse('index'))"],"id":5}],[{"start":{"row":9,"column":37},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]},{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"insert","lines":["",""]},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"remove","lines":["    "],"id":7}],[{"start":{"row":11,"column":0},"end":{"row":34,"column":46},"action":"insert","lines":["def login(request):","    \"\"\"A view that manages the login form\"\"\"","    if request.method == 'POST':","        user_form = UserLoginForm(request.POST)","        if user_form.is_valid():","            user = auth.authenticate(request.POST['username_or_email'],","                                     password=request.POST['password'])","","            if user:","                auth.login(request, user)","                messages.error(request, \"You have successfully logged in\")","","                if request.GET and request.GET['next'] !='':","                    next = request.GET['next']","                    return HttpResponseRedirect(next)","                else:","                    return redirect(reverse('index'))","            else:","                user_form.add_error(None, \"Your username or password are incorrect\")","    else:","        user_form = UserLoginForm()","","    args = {'user_form': user_form, 'next': request.GET.get('next', '')}","    return render(request, 'login.html', args)"],"id":8}],[{"start":{"row":2,"column":44},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":9}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":54},"action":"insert","lines":["from .forms import UserLoginForm, UserRegistrationForm"],"id":10}]]},"ace":{"folds":[],"scrolltop":90,"scrollleft":0,"selection":{"start":{"row":32,"column":35},"end":{"row":32,"column":35},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":5,"state":"start","mode":"ace/mode/python"}},"timestamp":1564478172599,"hash":"882e974e89073b7968c64ef61c75a16717e7be2b"}